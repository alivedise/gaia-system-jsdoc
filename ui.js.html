<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: ui.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: ui.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>(function(window) {
  var nextID = 0;
  /**
   * A base view controller.
   *
   * It will do:
   * 1. Render the view,
   *     based on this.view().
   * 2. Get all the elements you need.
   * 3. Update the view,
   *     base on this.config.
   *
   * @class System.UI
   */
  function UI(config) {
    this._id = nextID++;
    if (!this.config)
      this.config = config;
    this.elements = {};
    this.render();
    this.update();
  };

  UI.prototype = {
    CONTAINER: document.body,

    /**
     * Where to append our view.
     * @return {DOMElement} DOM element
     */
    get container() {
      var container = this.CONTAINER || document.body;
      return container;
    },

    CLASSNAME: 'base-ui',

    /**
     * Override the Object.toString
     * to have readable print.
     * @return {String} class name + instanceID
     */
    toString: function() {
      return '[' + this.CLASSNAME + ']' + this.instanceID;
    },

    debug: function debug(msg) {
      if (!System.DEBUG)
        return;

      console.log(this.toString(), msg);
    },

    get instanceID() {
      return this.CLASSNAME + '-' + this._id;
    },

    /**
     * Call show() or not after render done.
     * @type {Boolean}
     */
    _initiallyShown: true,

    handleEvent: function() {},

    hide: function() {
      if (this.element)
        this.element.classList.remove('visible');
    },

    show: function() {
      if (this.element)
        this.element.classList.add('visible');
    },

    _findElement: function(selector, element) {
      if (selector === '0')
        debugger;
      element = element || this.CONTAINER || document;

      if (!this.elements[selector]) {
        this.elements[selector] = element.querySelector(selector);
      }

      return this.elements[selector];
    },

    get element() {
      return this._findElement('.' + this.CLASSNAME);
    },

    view: function() {
      // replace me
    },

    render: function() {
      if (this._rendered)
        return;
      var container = this.CONTAINER || this.constructor.CONTAINER;
      container.insertAdjacentHTML('beforeend', this.view());
      this.getAllElements();
      if (this._initiallyShown)
        this.show();
      this._rendered = true;
      this._onrenderend();
    },

    update: function() {
      // implement me
    },
  
    getAllElements: function() {
      this.ELEMENTS.forEach(function(selector) {
        console.log(selector);
        if (!this.elements[selector])
          this.elements[selector] = this._findElement('.' + selector, this.element);
      }, this);
    },

    _onrenderend: function() {},

    resize: function() {
      // Usually we're called by Parent or an resize event
    },

    publish: function(eventName, detail) {
      var evt = document.createEvent('CustomEvent');
      evt.initCustomEvent(eventName, true, false, detail);
      var target = this.container || window;
      target.dispatchEvent(evt);
    }
  };
  System.UI = UI;
})(this);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="AppWindow.html">AppWindow</a></li><li><a href="BrowserConfig.html">BrowserConfig</a></li><li><a href="System.UI.html">UI</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AnimatedIcon">AnimatedIcon</a></li><li><a href="global.html#Clock">Clock</a></li><li><a href="global.html#DeviceStorageWatcher">DeviceStorageWatcher</a></li><li><a href="global.html#start">start</a></li><li><a href="global.html#stop">stop</a></li><li><a href="global.html#SystemDialog">SystemDialog</a></li><li><a href="global.html#SystemScreen">SystemScreen</a></li><li><a href="global.html#timeoutID">timeoutID</a></li><li><a href="global.html#timerID">timerID</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Fri Jun 21 2013 15:52:38 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
