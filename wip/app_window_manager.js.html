<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>FirefoxOS - SystemApp - API documentation : Source: app_window_manager.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link href="styles/bootstrap.css" rel="stylesheet">
    <link href="styles/docs.css" rel="stylesheet">
    <link href="styles/bootstrap-custom.css" rel="stylesheet">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
  </head>
  <body>
    <header class="header navbar navbar-inverse">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="brand" href="#"><strong>FirefoxOS SystemApp</strong> API documentation</a>
        </div>
      </div>
    </header>

    <div class="container-fluid">
      <div class="row-fluid">
          <div class="span4">
              <h2><a href="index.html">Index</a></h2><div class="well well-small"><ul class="nav nav-list"><li class="nav-header">Modules</li><li><a href="module-ActivityWindowFactory.html">ActivityWindowFactory</a></li>
<li><a href="module-AppWindowFactory.html">AppWindowFactory</a></li>
<li><a href="module-AppWindowManager.html">AppWindowManager</a></li>
<li><a href="module-HomescreenLauncher.html">HomescreenLauncher</a></li>
<li><a href="module-LayoutManager.html">LayoutManager</a></li>
<li><a href="module-OrientationManager.html">OrientationManager</a></li>
<li><a href="module-WrapperFactory.html">WrapperFactory</a></li></ul></div><div class="well well-small"><ul class="nav nav-list"><li class="nav-header">Classes</li><li><a href="ActivityWindow.html"><i class="icon-shield" style="color: #0186d1"></i> ActivityWindow</a></li><li><a href="AppAuthenticationDialog.html"><i class="icon-shield" style="color: #0186d1"></i> AppAuthenticationDialog</a></li><li><a href="AppChrome.html"><i class="icon-shield" style="color: #0186d1"></i> AppChrome</a></li><li><a href="AppModalDialog.html"><i class="icon-shield" style="color: #0186d1"></i> AppModalDialog</a></li><li><a href="AppTransitionController.html"><i class="icon-shield" style="color: #0186d1"></i> AppTransitionController</a></li><li><a href="AppWindow.html"><i class="icon-shield" style="color: #0186d1"></i> AppWindow</a></li><li><a href="BrowserFrame.html"><i class="icon-shield" style="color: #0186d1"></i> BrowserFrame</a></li><li><a href="HomescreenWindow.html"><i class="icon-shield" style="color: #0186d1"></i> HomescreenWindow</a></li></ul></div><div class="well well-small"><ul class="nav nav-list"><li class="nav-header">Public Events</li><li><a href="ActivityWindow.html#event:activitybackground"><i class="icon-bell-alt" style="color: yellow"></i> activitybackground <span class="label label-inverse pull-right">ActivityWindow</span></a></li><li><a href="ActivityWindow.html#event:activityclose"><i class="icon-bell-alt" style="color: yellow"></i> activityclose <span class="label label-inverse pull-right">ActivityWindow</span></a></li><li><a href="ActivityWindow.html#event:activityclosing"><i class="icon-bell-alt" style="color: yellow"></i> activityclosing <span class="label label-inverse pull-right">ActivityWindow</span></a></li><li><a href="ActivityWindow.html#event:activitycreated"><i class="icon-bell-alt" style="color: yellow"></i> activitycreated <span class="label label-inverse pull-right">ActivityWindow</span></a></li><li><a href="ActivityWindow.html#event:activityforeground"><i class="icon-bell-alt" style="color: yellow"></i> activityforeground <span class="label label-inverse pull-right">ActivityWindow</span></a></li><li><a href="ActivityWindow.html#event:activityopen"><i class="icon-bell-alt" style="color: yellow"></i> activityopen <span class="label label-inverse pull-right">ActivityWindow</span></a></li><li><a href="ActivityWindow.html#event:activityopening"><i class="icon-bell-alt" style="color: yellow"></i> activityopening <span class="label label-inverse pull-right">ActivityWindow</span></a></li><li><a href="ActivityWindow.html#event:activityrendered"><i class="icon-bell-alt" style="color: yellow"></i> activityrendered <span class="label label-inverse pull-right">ActivityWindow</span></a></li><li><a href="ActivityWindow.html#event:activityterminated"><i class="icon-bell-alt" style="color: yellow"></i> activityterminated <span class="label label-inverse pull-right">ActivityWindow</span></a></li><li><a href="ActivityWindow.html#event:activitywillrender"><i class="icon-bell-alt" style="color: yellow"></i> activitywillrender <span class="label label-inverse pull-right">ActivityWindow</span></a></li><li><a href="AppWindow.html#event:appclose"><i class="icon-bell-alt" style="color: yellow"></i> appclose <span class="label label-inverse pull-right">AppWindow</span></a></li><li><a href="AppWindow.html#event:appclosing"><i class="icon-bell-alt" style="color: yellow"></i> appclosing <span class="label label-inverse pull-right">AppWindow</span></a></li><li><a href="AppWindow.html#event:appcreated"><i class="icon-bell-alt" style="color: yellow"></i> appcreated <span class="label label-inverse pull-right">AppWindow</span></a></li><li><a href="AppWindow.html#event:appdestroyed"><i class="icon-bell-alt" style="color: yellow"></i> appdestroyed <span class="label label-inverse pull-right">AppWindow</span></a></li><li><a href="AppWindow.html#event:appopen"><i class="icon-bell-alt" style="color: yellow"></i> appopen <span class="label label-inverse pull-right">AppWindow</span></a></li><li><a href="AppWindow.html#event:appopening"><i class="icon-bell-alt" style="color: yellow"></i> appopening <span class="label label-inverse pull-right">AppWindow</span></a></li><li><a href="AppWindow.html#event:apprendered"><i class="icon-bell-alt" style="color: yellow"></i> apprendered <span class="label label-inverse pull-right">AppWindow</span></a></li><li><a href="AppWindow.html#event:apprequestclose"><i class="icon-bell-alt" style="color: yellow"></i> apprequestclose <span class="label label-inverse pull-right">AppWindow</span></a></li><li><a href="AppWindow.html#event:apprequestopen"><i class="icon-bell-alt" style="color: yellow"></i> apprequestopen <span class="label label-inverse pull-right">AppWindow</span></a></li><li><a href="AppWindow.html#event:appresize"><i class="icon-bell-alt" style="color: yellow"></i> appresize <span class="label label-inverse pull-right">AppWindow</span></a></li><li><a href="AppWindow.html#event:appterminated"><i class="icon-bell-alt" style="color: yellow"></i> appterminated <span class="label label-inverse pull-right">AppWindow</span></a></li><li><a href="AppWindow.html#event:appwilldestroy"><i class="icon-bell-alt" style="color: yellow"></i> appwilldestroy <span class="label label-inverse pull-right">AppWindow</span></a></li><li><a href="AppWindow.html#event:appwillrender"><i class="icon-bell-alt" style="color: yellow"></i> appwillrender <span class="label label-inverse pull-right">AppWindow</span></a></li><li><a href="HomescreenWindow.html#event:homescreenbackground"><i class="icon-bell-alt" style="color: yellow"></i> homescreenbackground <span class="label label-inverse pull-right">HomescreenWindow</span></a></li><li><a href="HomescreenWindow.html#event:homescreenclose"><i class="icon-bell-alt" style="color: yellow"></i> homescreenclose <span class="label label-inverse pull-right">HomescreenWindow</span></a></li><li><a href="HomescreenWindow.html#event:homescreenclosing"><i class="icon-bell-alt" style="color: yellow"></i> homescreenclosing <span class="label label-inverse pull-right">HomescreenWindow</span></a></li><li><a href="HomescreenWindow.html#event:homescreencreated"><i class="icon-bell-alt" style="color: yellow"></i> homescreencreated <span class="label label-inverse pull-right">HomescreenWindow</span></a></li><li><a href="HomescreenWindow.html#event:homescreenforeground"><i class="icon-bell-alt" style="color: yellow"></i> homescreenforeground <span class="label label-inverse pull-right">HomescreenWindow</span></a></li><li><a href="HomescreenWindow.html#event:homescreenopen"><i class="icon-bell-alt" style="color: yellow"></i> homescreenopen <span class="label label-inverse pull-right">HomescreenWindow</span></a></li><li><a href="HomescreenWindow.html#event:homescreenopening"><i class="icon-bell-alt" style="color: yellow"></i> homescreenopening <span class="label label-inverse pull-right">HomescreenWindow</span></a></li><li><a href="HomescreenWindow.html#event:homescreenrendered"><i class="icon-bell-alt" style="color: yellow"></i> homescreenrendered <span class="label label-inverse pull-right">HomescreenWindow</span></a></li><li><a href="HomescreenWindow.html#event:homescreenterminated"><i class="icon-bell-alt" style="color: yellow"></i> homescreenterminated <span class="label label-inverse pull-right">HomescreenWindow</span></a></li><li><a href="HomescreenWindow.html#event:homescreenwillrender"><i class="icon-bell-alt" style="color: yellow"></i> homescreenwillrender <span class="label label-inverse pull-right">HomescreenWindow</span></a></li><li><a href="module-LayoutManager.html#event:system-resize"><i class="icon-bell-alt" style="color: yellow"></i> system-resize <span class="label label-inverse pull-right">module:LayoutManager</span></a></li><li><a href="module-OrientationManager.html#event:reset-orientation"><i class="icon-bell-alt" style="color: yellow"></i> reset-orientation <span class="label label-inverse pull-right">module:OrientationManager</span></a></li></ul></div><div class="well well-small"><ul class="nav nav-list"><li class="nav-header">Private Events</li><li><a href="AppWindow.html#event:_swipein"><i class="icon-bell-alt" style="color: yellow"></i> _swipein <span class="label label-inverse pull-right">AppWindow</span></a></li><li><a href="AppWindow.html#event:_swipeout"><i class="icon-bell-alt" style="color: yellow"></i> _swipeout <span class="label label-inverse pull-right">AppWindow</span></a></li><li><a href="AppWindow.html#event:_withkeyboard"><i class="icon-bell-alt" style="color: yellow"></i> _withkeyboard <span class="label label-inverse pull-right">AppWindow</span></a></li><li><a href="AppWindow.html#event:_withoutkeyboard"><i class="icon-bell-alt" style="color: yellow"></i> _withoutkeyboard <span class="label label-inverse pull-right">AppWindow</span></a></li></ul></div><div class="well well-small"><ul class="nav nav-list"><li class="nav-header">Mixins</li><li><a href="BrowserMixin.html"><i class="icon-beaker"></i> BrowserMixin</a></li></ul></div><div class="well well-small"><ul class="nav nav-list"><li class="nav-header">Global</li><li><a href="global.html#addEventListeners"><i class="icon-globe" style="color: black;"></i> addEventListeners</a></li><li><a href="global.html#Clock"><i class="icon-globe" style="color: black;"></i> Clock</a></li><li><a href="global.html#localizeElement"><i class="icon-globe" style="color: black;"></i> localizeElement</a></li><li><a href="global.html#LockScreen"><i class="icon-globe" style="color: black;"></i> LockScreen</a></li><li><a href="global.html#populateErrorMessage"><i class="icon-globe" style="color: black;"></i> populateErrorMessage</a></li><li><a href="global.html#start"><i class="icon-globe" style="color: black;"></i> start</a></li><li><a href="global.html#stop"><i class="icon-globe" style="color: black;"></i> stop</a></li><li><a href="global.html#SystemDialog"><i class="icon-globe" style="color: black;"></i> SystemDialog</a></li><li><a href="global.html#SystemScreen"><i class="icon-globe" style="color: black;"></i> SystemScreen</a></li><li><a href="global.html#timeoutID"><i class="icon-globe" style="color: black;"></i> timeoutID</a></li><li><a href="global.html#timerID"><i class="icon-globe" style="color: black;"></i> timerID</a></li></ul></div>
          </div>

          <div class="span8">
              <h1 class="page-header">Source: app_window_manager.js</h1>
              


    
    <section>
        <article>
            <pre class="prettyprint source"><code>'use strict';
(function(window) {
  var DEBUG = false;
  var screenElement = document.getElementById('screen');

  /**
   * AppWindowManager manages the life cycle of AppWindow instances.
   *
   * It on demand creates a new AppWindow instance,
   * resize an existing AppWindow instance,
   * destroy a closing AppWindow instance.
   *
   * @module AppWindowManager
   */
  window.AppWindowManager = {
    continuousTransition: false,

    element: document.getElementById('windows'),

    // backward compatibility to WindowManager
    displayedApp: null,

    runningApps: {},

    // TODO: Remove this.
    getRunningApps: function awm_getRunningApps() {
      return this.runningApps;
    },

    getDisplayedApp: function awm_getDisplayedApp() {
      return this.displayedApp;
    },

    getActiveApp: function awm_getActiveApp() {
      return this._activeApp;
    },

    getApp: function awm_getApp(origin) {
      return this.runningApps[origin];
    },

    // reference to active appWindow instance.
    _activeApp: null,

    // store all alive appWindow instances.
    // note: the id is instanceID instead of origin here.
    _apps: {},

    /**
     * Switch to a different app
     * @param  {String}   origin   The origin of the new app.
     */
    display: function awm_display(origin) {
      this.debug('displaying ' + origin);
      var currentApp = this.displayedApp, newApp = origin ||
        HomescreenLauncher.origin;

      if (newApp === HomescreenLauncher.origin) {
        HomescreenLauncher.getHomescreen();
      } else if (currentApp === null) {
        HomescreenLauncher.getHomescreen().setVisible(false);
      }

      this.debug(' current is ' + currentApp + '; next is ' + newApp);
      if (currentApp == newApp) {
        // Do nothing.
        return;
      }

      var appNext = this.runningApps[newApp];
      this.debug(appNext);
      if (!appNext)
        return;

      if (document.mozFullScreen) {
        document.mozCancelFullScreen();
      }

      screenElement.classList.remove('fullscreen-app');

      var appCurrent = this.runningApps[currentApp];
      var switching = appCurrent &amp;&amp; !appCurrent.isHomescreen &amp;&amp;
                      !appNext.isHomescreen;

      if (appCurrent &amp;&amp; LayoutManager.keyboardEnabled) {
        // Ask keyboard to hide before we switch the app.
        var self = this;
        window.addEventListener('keyboardhidden', function onhiddenkeyboard() {
          window.removeEventListener('keyboardhidden', onhiddenkeyboard);
          self.switchApp(appCurrent, appNext, switching);
        });

        if (this.continuousTransition) {
          // Do keyboard transition.
          KeyboardManager.hideKeyboard();
        } else {
          // Hide keyboard immediately.
          KeyboardManager.hideKeyboardImmediately();
        }
      } else {
        this.switchApp(appCurrent, appNext, switching);
      }
    },

    switchApp: function awm_switchApp(appCurrent, appNext, switching) {
      this.debug('before ready check' + appCurrent + appNext);
      appNext.ready(function() {
        this.debug('ready to open/close' + switching);
        if (switching)
          HomescreenLauncher.getHomescreen().fadeOut();
        this._updateActiveApp(appNext.isHomescreen ?
          HomescreenLauncher.origin : appNext.origin);

        var immediateTranstion = false;
        if (appNext.rotatingDegree === 90 || appNext.rotatingDegree === 270) {
          immediateTranstion = true;
        } else if (appCurrent) {
          var degree = appCurrent.determineClosingRotationDegree();
          if (degree === 90 || degree === 270) {
            immediateTranstion = true;
          }
        }

        if (appNext.resized &amp;&amp;
            !LayoutManager.match(appNext.width,
              appNext.height - appNext.calibratedHeight(),
              appNext.isFullScreen())) {
          immediateTranstion = true;
        }

        appNext.open(immediateTranstion ? 'immediate' :
                      ((switching === true) ? 'invoked' : null));
        if (appCurrent) {
          appCurrent.close(immediateTranstion ? 'immediate' :
                            ((switching === true) ? 'invoking' : null));
        } else {
          this.debug('No current running app!');
        }
      }.bind(this));
    },

    init: function awm_init() {
      if (LockScreen &amp;&amp; LockScreen.locked) {
        this.element.setAttribute('aria-hidden', 'true');
      }
      if (System.slowTransition) {
        this.element.classList.add('slow-transition');
      } else {
        this.element.classList.remove('slow-transition');
      }
      window.addEventListener('launchapp', this);
      window.addEventListener('home', this);
      window.addEventListener('appcreated', this);
      window.addEventListener('appterminated', this);
      window.addEventListener('ftuskip', this);
      window.addEventListener('appopened', this);
      window.addEventListener('apprequestopen', this);
      window.addEventListener('apprequestclose', this);
      window.addEventListener('homescreenopened', this);
      window.addEventListener('reset-orientation', this);
      window.addEventListener('homescreencreated', this);
      window.addEventListener('homescreen-changed', this);
      // Watch chrome event that order to close an app
      window.addEventListener('killapp', this);
      // Watch for event to bring a currently-open app to the foreground.
      window.addEventListener('displayapp', this);
      // Deal with application uninstall event
      // if the application is being uninstalled,
      // we ensure it stop running here.
      window.addEventListener('applicationuninstall', this);
      window.addEventListener('hidewindows', this);
      window.addEventListener('showwindows', this);
      window.addEventListener('hidewindow', this);
      window.addEventListener('showwindow', this);
      window.addEventListener('overlaystart', this);
      window.addEventListener('homegesture-enabled', this);
      window.addEventListener('homegesture-disabled', this);
      window.addEventListener('system-resize', this);

      // update app name when language setting changes
      SettingsListener.observe('language.current', null,
        function(value) {
          if (!value)
            return;
          this.broadcastMessage('localized');
        }.bind(this));

      // continuous transition controlling
      SettingsListener.observe('continuous-transition.enabled', null,
        function(value) {
          if (!value)
            return;
          this.continuousTransition = !!value;
        }.bind(this));
    },

    handleEvent: function awm_handleEvent(evt) {
      switch (evt.type) {
        case 'system-resize':
          this.debug(' Resizing...');
          if (this._activeApp) {
            this.debug(' Resizing ' + this._activeApp.name);
            if (!this._activeApp.isTransitioning()) {
              this._activeApp.resize();
            }
          }
          break;

        // Dispatch internal events for navigation usage.
        // The active app's navigation needs to know homes gesture is
        // toggled to hide itself.
        case 'homegesture-disabled':
        case 'homegesture-enabled':
          this.broadcastMessage(evt.type);
          break;

        case 'appcreated':
          var app = evt.detail;
          this.runningApps[evt.detail.origin] = app;
          break;

        case 'appterminated':
          var app = evt.detail;
          var instanceID = evt.detail.instanceID;
          if (this._activeApp &amp;&amp;
              app.instanceID === this._activeApp.instanceID) {
            this._activeApp = null;
          }
          delete this.runningApps[evt.detail.origin];
          break;

        case 'reset-orientation':
          if (this._activeApp) {
            this._activeApp.setOrientation();
          }
          break;

        case 'ftuskip':
          this.display();
          break;

        case 'appopened':
        case 'homescreenopened':
          // Someone else may open the app,
          // so we need to update active app.
          this._updateActiveApp(evt.detail.isHomescreen ?
            HomescreenLauncher.origin :
            evt.detail.origin);
          break;

        case 'homescreencreated':
          this.runningApps[HomescreenLauncher.origin] = evt.detail;
          break;

        case 'homescreen-changed':
          this.display();
          break;

        case 'killapp':
          this.kill(evt.detail.origin);
          break;

        case 'displayapp':
        case 'apprequestopen':
          this.debug(evt.type, '========>');
          this.display(evt.detail.origin);
          break;

        case 'apprequestclose':
          if (evt.detail.isActive())
            this.display();
          break;

        // Deal with application uninstall event
        // if the application is being uninstalled,
        // we ensure it stop running here.
        case 'applicationuninstall':
          this.kill(evt.detail.application.origin);
          break;

        case 'hidewindows':
          this.element.setAttribute('aria-hidden', 'true');
          break;

        case 'showwindows':
          this.element.setAttribute('aria-hidden', 'false');
          break;

        case 'hidewindow':
          var detail = evt.detail;

          if (this._activeApp &amp;&amp;
              this.displayedApp !== HomescreenLauncher.origin) {
            // This is coming from attention screen.
            // If attention screen has the same origin as our active app,
            // we cannot turn off its page visibility
            // because they are sharing the same process and the same docShell,
            // so turn off page visibility would overwrite the page visibility
            // of the active attention screen.
            if (detail &amp;&amp; detail.origin &amp;&amp;
                detail.origin === this.displayedApp) {
              return;
            }
            this._activeApp.setVisible(false);
          } else {
            var home = HomescreenLauncher.getHomescreen();
            home &amp;&amp; home.setVisible(false);
          }
          break;

        case 'showwindow':
          if (this._activeApp &amp;&amp;
              this.displayedApp !== HomescreenLauncher.origin) {
            this._activeApp.setVisible(true);
          } else {
            var home = HomescreenLauncher.getHomescreen();
            home &amp;&amp; home.setVisible(true);
          }
          break;

        case 'overlaystart':
          // Instantly blur the frame in order to ensure hiding the keyboard
          var app = this._activeApp;
          if (app) {
            if (!app.isOOP()) {
              // Bug 845661 - Attention screen does not appears when
              // the url bar input is focused.
              // Calling app.iframe.blur() on an in-process window
              // seems to triggers heavy tasks that froze the main
              // process for a while and seems to expose a gecko
              // repaint issue.
              // So since the only in-process frame is the browser app
              // let's switch it's visibility as soon as possible when
              // there is an attention screen and delegate the
              // responsibility to blur the possible focused elements
              // itself.
              app.setVisible(false, true);
            } else {
              app.blur();
            }
          }
          break;

        // If the lockscreen is active, it will stop propagation on this event
        // and we'll never see it here. Similarly, other overlays may use this
        // event to hide themselves and may prevent the event from getting here.
        // Note that for this to work, the lockscreen and other overlays must
        // be included in index.html before this one, so they can register their
        // event handlers before we do.
        case 'home':
          if (!HomescreenLauncher.ready)
            return;

          if (this._activeApp &amp;&amp; !this._activeApp.isHomescreen) {
            // Make sure this happens before activity frame is removed.
            // Because we will be asked by a 'activity-done' event from gecko
            // to relaunch to activity caller, and this is the only way to
            // determine if we are going to homescreen or the original app.

            this.debug('back to home.');
            this.display(HomescreenLauncher.origin);
          } else {
            // dispatch event to close activity.
            this.debug('ensure home.');
            HomescreenLauncher.getHomescreen().ensure(true);
          }
          break;

        case 'launchapp':
          var config = evt.detail;
          this.debug('launching' + config.origin);
          this.launch(config);
          break;
      }
    },

    launch: function awm_launch(config) {
      // Don't need to relaunch system app.
      if (config.url === window.location.href)
        return;

      // ActivityWindowManager
      if (config.isActivity &amp;&amp; config.inline)
        return;

      if (config.stayBackground) {
        this.debug('launching background service: ' + config.url);
        // If the message specifies we only have to show the app,
        // then we don't have to do anything here
        if (config.changeURL) {
          if (this.runningApps[config.origin]) {
            this.runningApps[config.origin].modifyURLatBackground(config.url);
          } else if (config.origin !== HomescreenLauncher.origin) {
            // XXX: We could ended opening URls not for the app frame
            // in the app frame. But we don't care.
            new AppWindow(config);
          } else {
            HomescreenLauncher.getHomescreen().ensure();
          }
        }
      } else {
        if (config.origin == HomescreenLauncher.origin) {
          // No need to append a frame if is homescreen
          this.display();
        } else {
          // The policy is we always check the same apps are already
          // opened by checking manifestURL + pageURL.
          if (!this.runningApps[config.origin]) {
            new AppWindow(config);
          }
          this.display(config.origin);
        }

        // We will only bring apps to the foreground when the message
        // specifically requests it.
        if (!config.isActivity || !this._activeApp)
          return;

        var caller = this._activeApp;
        this.runningApps[config.origin].activityCaller = caller;
        caller.activityCallee = this.runningApps[config.origin];
      }
    },

    debug: function awm_debug() {
      if (DEBUG) {
        console.log('[AppWindowManager]' +
          '[' + System.currentTime() + ']' +
          Array.slice(arguments).concat());
      }
    },

    kill: function awm_kill(origin) {
      if (this.runningApps[origin]) {
        this.runningApps[origin].kill();
      }
    },

    publish: function awm_publish(event, detail) {
      var evt = document.createEvent('CustomEvent');
      evt.initCustomEvent(event, true, false, detail || this);

      this.debug('publish: ' + event);
      window.dispatchEvent(evt);
    },

    _updateActiveApp: function awm__changeActiveApp(origin) {
      this.displayedApp = origin;
      this._activeApp = this.runningApps[this.displayedApp];
      this.debug(origin + this._activeApp.isFullScreen());
      if (this._activeApp.isFullScreen()) {
        screenElement.classList.add('fullscreen-app');
      } else {
        screenElement.classList.remove('fullscreen-app');
      }
      this.debug('=== Active app now is: ',
        this._activeApp.name || this._activeApp.origin, '===');
    },

    broadcastMessage: function awm_broadcastMessage(message, detail) {
      for (var id in this.runningApps) {
        this.runningApps[id].broadcast(message, detail);
      }
    }
  };

  AppWindowManager.init();
}(this));
</code></pre>
        </article>
    </section>




          </div>
      </div>

        <br clear="both">

      <footer>
        Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-dev</a> on Mon Dec 02 2013 19:57:00 GMT+0800 (CST)
        <br>
      </footer>
      <script> prettyPrint(); </script>
    </div>
  </body>
</html>
